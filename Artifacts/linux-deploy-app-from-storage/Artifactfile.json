{
  "$schema": "https://raw.githubusercontent.com/Azure/azure-devtestlab/master/schemas/2015-01-01/dtlArtifacts.json",
  "title": "Deploy App from Azure Container",
  "description": "Use this to deploy an app stored in an Azure container to Linux",
  "tags": [
    "Blob",
    "Linux",
    "Deploy"
  ],
  "iconUri": "",
  "targetOsType": "Linux",
  "parameters": {
    "container": {
      "type": "string",
      "displayName": "Container Name",
      "description": "The name of the Azure container to deploy."
    },
    "destination": {
      "type": "string",
      "displayName": "Destination",
      "description": "The destination folder on the VM to deploy the app.",
      "defaultValue": "/opt/<myapp>"
    },
    "storageConnectionString": {
      "type": "string",
      "displayName": "Storage Connection String",
      "description": "The connection string to the Azure storage account container containing the app."
    },
    "deployScript": {
      "type": "string",
      "displayName": "Deploy Script File",
      "description": "The file name of a script included in the container that will run after all files are downloaded from the container.",
      "optional": true,
      "defaultValue": ""
    }
  },
  "runCommand": {
      "commandToExecute": "[concat('sh deploy_from_azure_container_v1.sh ', parameters('container'), ' ', parameters('destination'), ' ', parameters('storageConnectionString'), ' ', parameters('deployScript'))]"
  }
}